<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Type 1 Diabetes Calculator</title>
    <link rel="stylesheet" href="style.css">
</head>

<body>
    <div class="container">

        <h1>Type 1 Diabetes Calculator</h1>

        <!-- Upload Card Panel -->
        <div class="upload-panel">
            <h3>Upload Nutrition Label Images</h3>

            <div class="upload-box">
                <label>Front Image:</label>
                <input type="file" id="frontImage" accept="image/*">
            </div>

            <div class="upload-box">
                <label>Nutrition Label Image:</label>
                <input type="file" id="labelImage" accept="image/*">
            </div>

            <button id="uploadImagesBtn" class="primary-btn">Process Images</button>

            <div id="uploadPreview" class="preview-box"></div>
        </div>

        <!-- User Inputs -->
        <div class="row">
            <div class="column">
                <label>Name:</label>
                <input type="text" id="profileNameInput" value="Kai">
            </div>
            <div class="column">
                <label>Current BSL (mg/dL):</label>
                <input type="number" id="bslInput">
            </div>
        </div>

        <h2>Step 1: Food Label Per Serving</h2>

        <div class="row">
            <div class="column">
                <label>Food Name:</label>
                <input type="text" id="foodNameInput">
            </div>
            <div class="column">
                <label>Meal Type:</label>
                <select id="mealTypeInput">
                    <option>Home Meal</option>
                    <option>Restaurant Meal</option>
                    <option>Packaged Item</option>
                </select>
            </div>
            <div class="column">
                <label>Serving Size (g or mL):</label>
                <input type="number" id="servingSizeInput">
            </div>
        </div>

        <div class="meal-time-selection">
            <label>Meal Time:</label>
            <div class="meal-time-buttons">
                <button type="button" class="meal-time-btn" data-meal-time="Breakfast">Breakfast</button>
                <button type="button" class="meal-time-btn" data-meal-time="Lunch">Lunch</button>
                <button type="button" class="meal-time-btn" data-meal-time="Dinner">Dinner</button>
                <button type="button" class="meal-time-btn" data-meal-time="Snack">Snack</button>
                <button type="button" class="meal-time-btn" data-meal-time="Fast Food">Fast Food</button>
                <button type="button" class="meal-time-btn" data-meal-time="Custom">Custom</button>
            </div>
        </div>

        <div class="row">
            <div class="column">
                <label>Serving equals:</label>
                <select id="servingEqualsInput">
                    <option value="Number">Number</option>
                    <option value="Fraction">Fraction</option>
                    <option value="Weight">Weight</option>
                </select>
            </div>

            <div class="column">
                <label>Per Quantity (per nutrition label):</label>
                <input type="text" id="qtyPiecesInput" placeholder="Ex: 1, 2, 0.5">
            </div>

            <div class="column">
                <label>Per Measurement:</label>
                <input type="text" id="perMeasurement" placeholder="Cup, Tbsp, etc.">
            </div>
        </div>

        <!-- Fraction Box (hidden by default) -->
        <div id="fractionBox" class="fraction-box hidden">
            <label>Fraction to Decimal Converter:</label>
            <input type="text" id="fractionInput" placeholder="Ex: 1/3 or 2 1/3">
            <button id="fractionConvertBtn">Convert</button>
        </div>

        <h3>Nutrition Per Serving</h3>

        <div class="row">
            <div class="column">
                <label>Calories:</label>
                <input type="number" id="caloriesInput">
            </div>
            <div class="column">
                <label>Fat (g):</label>
                <input type="number" id="fatInput">
            </div>
            <div class="column">
                <label>Sodium (mg):</label>
                <input type="number" id="sodiumInput">
            </div>
        </div>

        <div class="row">
            <div class="column">
                <label>Carbs (g):</label>
                <input type="number" id="carbsInput">
            </div>
            <div class="column">
                <label>Fiber (g):</label>
                <input type="number" id="fiberInput">
            </div>
            <div class="column">
                <label>Sugar (g):</label>
                <input type="number" id="sugarInput">
            </div>
            <div class="column">
                <label>Protein (g):</label>
                <input type="number" id="proteinInput">
            </div>
        </div>

        <h2>Step 2: Enter Consumed Information</h2>

        <div class="row">
            <div class="column wide">
                <label>Amount Having:</label>
                <input type="number" id="amountHavingInput">
            </div>
            <div class="column">
                <button id="addBtn" class="primary-btn">Click to Add</button>
            </div>
        </div>

        <h3>Food Item Summary</h3>
        <div id="summaryBox" class="summary-box"></div>

        <h3>Results</h3>
        <div id="resultsBox" class="result-box"></div>

        <h3>Logged Food Items</h3>

        <table>
            <thead>
                <tr>
                    <th>Item</th>
                    <th>Size</th>
                    <th>Calories</th>
                    <th>Sodium</th>
                    <th>Fat</th>
                    <th>Carbs</th>
                    <th>Fiber</th>
                    <th>Sugar</th>
                    <th>Protein</th>
                    <th>Qty Having</th>
                </tr>
            </thead>
            <tbody id="logTableBody"></tbody>
            <tfoot id="totalsRow"></tfoot>
        </table>

        <button id="saveHistoryButton" class="history-btn">Add to History Page</button>
        <button id="viewHistoryButton" class="history-btn">View History</button>

    </div>

    <!-- Scripts -->
    <!-- Tesseract OCR library -->
    <script src="https://cdn.jsdelivr.net/npm/tesseract.js@5.0.3/dist/tesseract.min.js"></script>

    <!-- OCR handler -->
    <script src="ocr.js"></script>

    <!-- Barcode scanner -->
    <script src="scanner.js"></script>

    <!-- Main app logic -->
    <script src="app.js"></script>
</body>
</html>
