<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Kai Carb Calculator</title>
    <link rel="manifest" href="manifest.webmanifest" />
    <meta name="theme-color" content="#00766e" />
    <link rel="stylesheet" href="style.css?v=3" />
  </head>

  <body>
    <header>
      <h1>Kai Carb Calculator</h1>
      <p>Enter label values per serving, then how much Kai eats, plus BSL and IOB.</p>
    </header>

    <nav class="tabs">
      <button id="tabcurrent" class="active" type="button">Current meal</button>
      <button id="tabhistory" type="button">History</button>
    </nav>

    <main>
      <!-- CURRENT MEAL VIEW -->
      <section id="currentView">
        <div class="grid2">
          <section class="card">
            <h2>STEP 1: Food label per serving</h2>

            <label>Food name
              <input id="foodName" list="foodNames" placeholder="e.g., Great Value Whole Milk" />
              <datalist id="foodNames"></datalist>
            </label>

            <label>Serving size (g or mL)
              <input id="servingSize" type="number" step="0.01" value="100" />
            </label>

            <label>Calories
              <input id="labelCalories" type="number" step="0.1" value="0" />
            </label>

            <label>Fat (g)
              <input id="labelFat" type="number" step="0.1" value="0" />
            </label>

            <label>Sodium (mg)
              <input id="labelSodium" type="number" step="1" value="0" />
            </label>

            <label>Carbs (g)
              <input id="labelCarbs" type="number" step="0.1" value="0" />
            </label>

            <label>Fiber (g)
              <input id="labelFiber" type="number" step="0.1" value="0" />
            </label>

            <label>Sugar (g)
              <input id="labelSugar" type="number" step="0.1" value="0" />
            </label>

            <label>Protein (g)
              <input id="labelProtein" type="number" step="0.1" value="0" />
            </label>
          </section>

          <section class="card">
            <h2>STEP 2: Enter Consumed Information</h2>
            <label>Having
              <input id="portionAmount" type="number" step="0.01" placeholder="Enter portion eaten" />
            </label>
            <button id="addFoodBtn" class="primary">Click to Add</button>
          </section>

          <section class="card">
            <h2>STEP 3: Context</h2>
            <label>Current BSL (mg/dL)
              <input id="bsl" type="number" value="120" />
            </label>

            <label>Insulin on board (u)
              <input id="iob" type="number" step="0.01" value="0.0" />
            </label>

            <label>Food type
              <select id="foodType">
                <option>Simple Carbs</option>
                <option>Carbs with Fiber</option>
                <option>Protein</option>
                <option>Plant-based Fat</option>
                <option>Low-Carb Veggies</option>
              </select>
            </label>
          </section>
        </div>

        <section class="card">
          <h2>Logged Food Items</h2>
          <table id="loggedFoods">
            <thead>
              <tr>
                <th>Item Name</th>
                <th>Calories</th>
                <th>Fat (g)</th>
                <th>Sodium (mg)</th>
                <th>Carbs (g)</th>
                <th>Fiber (g)</th>
                <th>Sugar (g)</th>
                <th>Protein (g)</th>
              </tr>
            </thead>
            <tbody></tbody>
            <tfoot>
              <tr>
                <td><strong>Totals</strong></td>
                <td id="totalCalories">0</td>
                <td id="totalFat">0</td>
                <td id="totalSodium">0</td>
                <td id="totalCarbs">0</td>
                <td id="totalFiber">0</td>
                <td id="totalSugar">0</td>
                <td id="totalProtein">0</td>
              </tr>
            </tfoot>
          </table>
        </section>

        <section class="card">
          <h2>Results</h2>
          <p><strong>Pre-bolus:</strong> <span id="preBolus">—</span></p>
          <p><strong>Split:</strong> <span id="split">—</span></p>
          <p><strong>Food Type:</strong> <span id="resultFoodType">—</span></p>
          <p><strong>Reason:</strong> <span id="reason">—</span></p>
        </section>

        <section class="card actions">
          <button id="saveHistoryBtn" class="secondary">Save to History</button>
        </section>
      </section>

      <!-- HISTORY VIEW -->
      <section id="historyView" class="hidden">
        <section class="card">
          <h2>History Log</h2>
          <p>Below are previously saved meals. These are stored locally on your device.</p>
          <table id="historyTable">
            <thead>
              <tr>
                <th>Date</th>
                <th>Items</th>
                <th>Total Carbs</th>
                <th>Total Fat</th>
                <th>Total Protein</th>
                <th>Pre-bolus</th>
                <th>Split</th>
              </tr>
            </thead>
            <tbody></tbody>
          </table>
        </section>
      </section>
    </main>

    <script src="app.js?v=3"></script>
  </body>
</html>
